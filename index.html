<!DOCTYPE html>
<html>
<head>

	<title>Box Project</title>
	<script>
		
		var storagerow = [];
		var storage = [];
		var numAllMatch = 0;
		var numNoneMatch = 0;
		var numOneMatch = 0;
		var matchHit = 0;
		var numAllMatch1 = 0;

		function main(){
			for(var i = 0; i < 1; i++){
				var arr= createArray();
				arr[0] = [33,10,27];
				arr[1] = [3,2,1];
				var permuted = permute(arr[1]);

				permArr = [];
  				usedChars = [];
				// console.log(permuted);
				//sorting dimensions of the box in acending order
				arr[0]=arr[0].sort(function(a,b) { return  a-b });

				storagerow.push(arr[0]);
				for(var j=0; j < permuted.length; j++){
					//check how many times pen goes in
					var z = packBoxOptimal(arr[0],permuted[j]);
					storagerow.push([z,permuted[j]]);
				}
				storage.push(storagerow);
				storagerow = [];
				

			}
			console.log(storage);
			
			var iterations = stats(storage);
			console.log("Number of times run: " + iterations + ", number of times our expected config worked: " + numAllMatch + "(verifying " + numAllMatch + ")");
			console.log("Number of times none match: " + numNoneMatch);
			console.log("Number of times we had one match: " + numOneMatch);
		}

		function stats(store){
			for(var row = 0; row<store.length; row++){
				//row is the row containing all information per box and pen iteration
				//value of greatest number of pencils fitting in box
				var index = Math.max(store[row][1][0], store[row][2][0], store[row][3][0], store[row][4][0], store[row][5][0], store[row][6][0]);
				if(index == 0){
					index = -1;
				}
				//finding the ordered row
				var ordered = store[row][1][1];
				//sorted has issues, so we are going to split apart the array, reassemble it, then sort it
				var ordered1 = ordered[0];
				var ordered2 = ordered[1];
				var ordered3 = ordered[2];
				var newOrdered = [ordered1, ordered2, ordered3];
				newOrdered.sort(function(a,b) { return  a-b });
				//finding index of greatest value
				for(var i = 1; i<7; i++){
					//checking to see if the value found by index is the number of times possible in the current configuration
					//if it is
					if(store[row][i].indexOf(index) != -1){
						//want to check relationship of the configuration with the configuration of the box
						//note that store[row][i][1] gives the current configuration of the pencil
						//console.log("proper one is: " + newOrdered);
						for(var counter = 0; counter < 3; counter++){

							//console.log(store[row][i][1][counter] + " and " + newOrdered[counter]);
							if(store[row][i][1][counter] == newOrdered[counter]){
								matchHit++;
							}

						}
						if(store[row][i][1][0]<=store[row][i][1][1] && store[row][i][1][1]<=store[row][i][1][2]){
							numAllMatch++;
						}

						// if(){

						// }
					}
					if(matchHit == 1){
						numOneMatch++;
					}
					else if(matchHit == 3){
						numAllMatch1++;
					}
					else if(matchHit == 0){
						numNoneMatch++;
					}
					else{
						console.log("how is this possible");
					}
					matchHit = 0;
				}
			}
			return row;
		}

		function packBoxOptimal(box, pen){
			// pen.sort();
			var l = Math.floor(box[0] / pen[0]);
			var w = Math.floor(box[1] / pen[1]);
			var h = Math.floor(box[2] / pen[2]);
			var sorted = l * w * h;
			return sorted; //this needs to return the possible number of packed items for each permuatation
		}

		var permArr = [];
  		var usedChars = [];

		function permute(input) {	
		
		  var i, ch;
		  for (i = 0; i < input.length; i++) {
		    ch = input.splice(i, 1)[0];
		    usedChars.push(ch);
		    if (input.length == 0) {
		      permArr.push(usedChars.slice());
		    }
		    permute(input);
		    input.splice(i, 0, ch);
		    usedChars.pop();
		  }
		  //establishing our refrence array
		  for(var j=0;j<permArr.length;j++){
		  	//checking the whole array to see if there are any copies
		  	for(var k = 0;k<permArr.length;k++){
		  		if(j != k && permArr[j] == permArr[k]){
		  			console.log("THIS IS A PROM");
		  		}
		  	}
		  }
		  return permArr;
		};

		
		function createArray(){
			var l = 0;
			var w = 0;
			var h = 0;
			var pl = 0;
			var pw = 0;
			var ph = 0;
			var box = [];
			var pencil = [];
			l = Math.floor(1000 * Math.random());
			w = Math.floor(1000 * Math.random());
			h = Math.floor(1000 * Math.random());
			pl = Math.floor(100 * Math.random())+1;
			pw = Math.floor(100 * Math.random())+1;
			ph = Math.floor(100 * Math.random())+1;

			box.push(l);
			box.push(w);
			box.push(h);
			pencil.push(pl);
			pencil.push(pw);
			pencil.push(ph);
			return [box, pencil];
		}
		// var thing = createArray();
		// console.log("box: " + thing[0] + ", pencil: " + thing[1]);

		main();
	</script>
</head>
<body>

</body>
</html>